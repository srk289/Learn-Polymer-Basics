<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="hello-element">
	<template>
		<input type="text" value="{{filterString::input}}"><br/>
		<template id="messagesList" is="dom-repeat" items="{{messages}}" as="message" filter="{{filterMessages(filterString)}}" sort="sortMessages">
			{{message.text}} : {{message.priority}}<br/>
		</template>
	</template>
</dom-module>

<script>
	Polymer({
		is: 'hello-element',
		properties: {
			messages: {
				type: Array,
				value: function(){
					return [
						{text: 'Structural Engineers', priority: 3},
						{text: 'Software Developers', priority: 2},
						{text: 'Tradies', priority: 1},
						{text: 'Miners', priority: 4}
					];
				}
			},
			filterString: String
		},
		filterMessages: function(str){
			return function(m){
				return m.text.indexOf(str) > -1;
			}
		},
		sortMessages: function(a,b){
			return a.priority - b.priority;
		}
	})
</script>